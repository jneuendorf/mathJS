<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>doc_base/Formals/Expression.js - mathJS API</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../../logo.png" title="mathJS API"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.0.1</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/Complex.html">Complex</a></li>
                                <li><a href="../classes/CONSTANTS.html">CONSTANTS</a></li>
                                <li><a href="../classes/DiscreteSet.html">DiscreteSet</a></li>
                                <li><a href="../classes/Expression.html">Expression</a></li>
                                <li><a href="../classes/Expression.Boolean.html">Expression.Boolean</a></li>
                                <li><a href="../classes/Hash.html">Hash</a></li>
                                <li><a href="../classes/Int.html">Int</a></li>
                                <li><a href="../classes/Interval.html">Interval</a></li>
                                <li><a href="../classes/Number.html">Number</a></li>
                                <li><a href="../classes/Object.html">Object</a></li>
                                <li><a href="../classes/Set.html">Set</a></li>
                                <li><a href="../classes/Term.html">Term</a></li>
                                <li><a href="../classes/Variable.html">Variable</a></li>
                            </ul>
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/mathJS.html">mathJS</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: doc_base/Formals/Expression.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
// Generated by CoffeeScript 1.9.3

/**
* Tree structure of expressions. It consists of 2 expression and 1 operation.
* @class Expression
* @constructor
* @param operation {Operation|String}
* @param expressions... {Expression}
*
 */

(function() {
  var slice = [].slice,
    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i &lt; l; i++) { if (i in this &amp;&amp; this[i] === item) return i; } return -1; };

  mathJS.Expression = (function() {
    var CLASS;

    CLASS = Expression;

    Expression.fromString = function(str) {
      return new mathJS.Expression();
    };

    Expression.parse = Expression.fromString;

    Expression.parser = new mathJS.Algorithms.ShuntingYard({
      &quot;!&quot;: {
        precedence: 5,
        associativity: &quot;right&quot;
      },
      &quot;^&quot;: {
        precedence: 4,
        associativity: &quot;right&quot;
      },
      &quot;*&quot;: {
        precedence: 3,
        associativity: &quot;left&quot;
      },
      &quot;/&quot;: {
        precedence: 3,
        associativity: &quot;left&quot;
      },
      &quot;+&quot;: {
        precedence: 2,
        associativity: &quot;left&quot;
      },
      &quot;-&quot;: {
        precedence: 2,
        associativity: &quot;left&quot;
      }
    });

    Expression[&quot;new&quot;] = function() {
      var expressions, operation;
      operation = arguments[0], expressions = 2 &lt;= arguments.length ? slice.call(arguments, 1) : [];
      return new CLASS(operation, expressions);
    };

    function Expression() {
      var expressions, operation;
      operation = arguments[0], expressions = 2 &lt;= arguments.length ? slice.call(arguments, 1) : [];
      if (typeof operation === &quot;string&quot;) {
        if (mathJS.Operations[operation] != null) {
          operation = mathJS.Operations[operation];
        } else {
          throw new mathJS.Errors.InvalidParametersError(&quot;Invalid operation string given: \&quot;&quot; + operation + &quot;\&quot;.&quot;);
        }
      }
      if (expressions.first instanceof Array) {
        expressions = expressions.first;
      }
      if (expressions.length === 0) {
        if (mathJS.Number.valueIsValid(operation)) {
          this.operation = null;
          this.expressions = [new mathJS.Number(operation)];
        } else {
          if (operation instanceof mathJS.Variable) {
            this.operation = null;
            this.expressions = [operation];
          } else {
            this.operation = null;
            this.expressions = [new mathJS.Variable(operation)];
          }
        }
      } else if (operation.arity === expressions.length) {
        this.operation = operation;
        this.expressions = expressions;
      } else {
        throw new mathJS.Errors.InvalidArityError(&quot;Invalid number of parameters (&quot; + expressions.length + &quot;) for Operation \&quot;&quot; + operation.name + &quot;\&quot;. Expected number of parameters is &quot; + operation.arity + &quot;.&quot;);
      }
    }


    /**
    * This method tests for the equality of structure. So 2*3x does not equal 6x!
    * For that see mathEquals().
    * @method equals
    *
     */

    Expression.prototype.equals = function(expression) {
      var doneExpressions, e1, e2, exp, i, j, l, len, len1, len2, m, n, ref, ref1, ref2, res, x;
      if (this.expressions.length !== expression.expressions.length) {
        return false;
      }
      if (this.operation == null) {
        return (expression.operation == null) &amp;&amp; expression.expressions.first.equals(this.expressions.first);
      }
      if (this.operation.commutative === true) {
        doneExpressions = [];
        ref = this.expressions;
        for (i = l = 0, len = ref.length; l &lt; len; i = ++l) {
          exp = ref[i];
          res = false;
          ref1 = expression.expressions;
          for (j = m = 0, len1 = ref1.length; m &lt; len1; j = ++m) {
            x = ref1[j];
            if (!(indexOf.call(doneExpressions, j) &lt; 0 &amp;&amp; x.equals(exp))) {
              continue;
            }
            doneExpressions.push(j);
            res = true;
            break;
          }
          if (!res) {
            return false;
          }
        }
        return true;
      } else {
        ref2 = this.expressions;
        for (i = n = 0, len2 = ref2.length; n &lt; len2; i = ++n) {
          e1 = ref2[i];
          e2 = expression.expressions[i];
          if (!e1.equals(e2)) {
            return false;
          }
        }
        return true;
      }
    };


    /**
    * This method tests for the logical/mathematical equality of 2 expressions.
    *
     */

    Expression.prototype.mathEquals = function(expression) {
      return this.simplify().equals(expression.simplify());
    };


    /**
    * @method eval
    * @param values {Object}
    * An object of the form {varKey: varVal}.
    * @returns The value of the expression (specified by the values).
    *
     */

    Expression.prototype[&quot;eval&quot;] = function(values) {
      var args, expression, k, l, len, ref, v, value;
      for (k in values) {
        v = values[k];
        if (mathJS.isPrimitive(v) &amp;&amp; mathJS.Number.valueIsValid(v)) {
          values[k] = new mathJS.Number(v);
        }
      }
      if (this.operation == null) {
        return this.expressions.first[&quot;eval&quot;](values);
      }
      args = [];
      ref = this.expressions;
      for (l = 0, len = ref.length; l &lt; len; l++) {
        expression = ref[l];
        value = expression[&quot;eval&quot;](values);
        if (value instanceof mathJS.Variable) {
          return this;
        }
        args.push(value);
      }
      return this.operation[&quot;eval&quot;](args);
    };

    Expression.prototype.simplify = function() {
      var evaluated;
      evaluated = this[&quot;eval&quot;]();
      return this;
    };

    Expression.prototype.getVariables = function() {
      var expression, l, len, ref, res, val;
      if (this.operation == null) {
        if ((val = this.expressions.first) instanceof mathJS.Variable) {
          return [val];
        }
        return [];
      }
      res = [];
      ref = this.expressions;
      for (l = 0, len = ref.length; l &lt; len; l++) {
        expression = ref[l];
        res = res.concat(expression.getVariables());
      }
      return res;
    };

    Expression.prototype._getSet = function() {
      var expression, l, len, ref, res;
      if (this.operation == null) {
        return this.expressions.first._getSet();
      }
      res = null;
      ref = this.expressions;
      for (l = 0, len = ref.length; l &lt; len; l++) {
        expression = ref[l];
        if (res != null) {
          res = res[this.operation.setEquivalent](expression._getSet());
        } else {
          res = expression._getSet();
        }
      }
      return res || new mathJS.Set();
    };


    /**
    * Get the &quot;range&quot; of the expression (the set of all possible results).
    * @method getSet
    *
     */

    Expression.prototype.getSet = function() {
      return this[&quot;eval&quot;]()._getSet();
    };

    Expression.prototype.evaluatesTo = Expression.prototype.getSet;

    if (DEBUG) {
      Expression.test = function() {
        var e1, e2, e4, str;
        e1 = new CLASS(5);
        e2 = new CLASS(new mathJS.Variable(&quot;x&quot;, mathJS.Number));
        e4 = new CLASS(&quot;+&quot;, e1, e2);
        console.log(e4.getVariables());
        str = &quot;(5x - 3)  ^ 2 * 2 / (4y + 3!)&quot;;
        return &quot;test done&quot;;
      };
    }

    return Expression;

  })();

}).call(this);

    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
